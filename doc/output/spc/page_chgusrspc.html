<HTML>
  <HEAD>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <TITLE>i5/OS Programmer's Toolkit - MI/EMI Programmer's Guide</TITLE>
    <link href="tabs.css" rel="stylesheet" type="text/css">
    <link href="doxygen.css" rel="stylesheet" type="text/css">
    <link href="docs.css" rel="stylesheet" type="text/css">

    <table width="100%" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left">
          <a href="http://sourceforge.net/donate/index.php?group_id=254578"><img src="http://images.sourceforge.net/images/project-support.jpg" width="88" height="32" border="0" alt="Support This Project" /> </a>
        </td>
        <td align="right">
          <a href="http://sourceforge.net/projects/i5toolkit"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=254578&amp;type=13" width="120" height="30" alt="Get i5/OS Programmer's Toolkit at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a>
        </td>

      </tr>
    </table>

  </HEAD>
  <body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="page_chgusrspc">The Change User Space (CHGUSRSPC) Command </a></h1>The Change User Space (CHGUSRSPC) command changes the content of a User Space (USRSPC) object. A USRSPC object is MI space object with object type code/subtype code hex 1934. This command can be used either interactively or in a CL program. The key difference between CHGUSRSPC and the Change User Space (QUSCHGUS) API is that the QUSCHGUS API cannot preserve the of validity of pointers written into a USRSPC, while the CHGUSRSPC command can write system pointers or space pointers into a USRSPC and the pointers written into the USRSPC will remain valid. As we know that system pointers to permanent objects will remain valid even across IPLs, so do space pointers addressing associated spaces of permanent objects, so these pointers stored in a USRSPC can be re-used by other applications repeatedly, and with no relation to the job who wrote them into the USRSPC.<h2><a class="anchor" name="s_chgusrspc_parms">
Parameters</a></h2>
<table border="1" cellspacing="3" cellpadding="3">
<tr bgcolor="silver">
<td>Keyword </td><td>Description </td><td>Choices </td><td>Notes <p>
</td></tr>
<tr>
<td rowspan="3"><a class="el" href="page_chgusrspc.html#ss_chgusrspc_parms_usrspc">USRSPC</a> </td><td>User space </td><td>Qualified object name </td><td rowspan="3">Required, positional 1. <p>
</td></tr>
<tr>
<td>Qualifier 1: User space </td><td>Name <p>
</td></tr>
<tr>
<td>Qualifier 2: Library </td><td>Name, <b>*LIBL</b> <p>
</td></tr>
<tr>
<td><a class="el" href="page_chgusrspc.html#ss_chgusrspc_parms_offset">OFFSET</a> </td><td>Offset into space </td><td>0 to 16M - 1Page </td><td>Optional <p>
</td></tr>
<tr>
<td><a class="el" href="page_chgusrspc.html#ss_chgusrspc_parms_datatype">DTATYPE</a> </td><td>Data type </td><td><b>*SCALAR</b>, *PTR </td><td>Optional <p>
</td></tr>
<tr>
<td><a class="el" href="page_chgusrspc.html#ss_chgusrspc_parms_dta">DTA</a> </td><td>Value of scalar data </td><td>Scalar data in character or hexadecimal format </td><td>Optional <p>
</td></tr>
<tr>
<td><a class="el" href="page_chgusrspc.html#ss_chgusrspc_parms_dtalen">DTALEN</a> </td><td>Length of scalar data, <b>*CALC</b> </td><td>1 - 32767 </td><td>Optional <p>
</td></tr>
<tr>
<td><a class="el" href="page_chgusrspc.html#ss_chgusrspc_parms_ptrtype">PTRTYPE</a> </td><td>Pointer type </td><td><b>*SYP</b>, *SPP </td><td>Optional <p>
</td></tr>
<tr>
<td rowspan="3"><a class="el" href="page_chgusrspc.html#ss_chgusrspc_parms_sysobj">SYSOBJ</a> </td><td>System object </td><td>Qualified object name </td><td rowspan="3">Optional <p>
</td></tr>
<tr>
<td>Qualifier 1: User space </td><td>Name <p>
</td></tr>
<tr>
<td>Qualifier 2: Library </td><td>Name, <b>*LIBL</b> <p>
</td></tr>
<tr>
<td><a class="el" href="page_chgusrspc.html#ss_chgusrspc_parms_objtype">OBJTYPE</a> </td><td>Object type </td><td>*ALRTBL *AUTL *BNDDIR *CFGL *CHTFMT *CLD *CLS *CMD *CNNL *COSD *CRG *CRQD *CSI *CSPMAP *CSPTBL *CTLD *DEVD *DOC *DTAARA *DTADCT *DTAQ *EDTD *EXITRG *FCT *FILE *FLR *FNTTBL *FNTRSC *FORMDF *FTR *GSS *IGCDCT *IGCSRT *IGCTBL *IMGCLG *IPXD *JOBD *JOBQ *JOBSCD *JRN *JRNRCV *LIB *LIND *LOCALE *MEDDFN *MENU *MODD *MODULE *MSGF *MSGQ *MGTCOL *M36 *M36CFG *NODL *NODGRP *NTBD *NWID *NWSCFG *NWSD *OUTQ *OVL *PAGDFN *PAGSEG *PDFMAP *PDG *PGM *PNLGRP *PRDAVL *PRDDFN *PRDLOD *PSFCFG *QMFORM *QMQRY *QRYDFN *RCT *S36 *SBSD *SCHIDX *SPADCT *SQLPKG *SQLUDT *SRVPGM *SVRSTG *SSND *TBL *TIMZON *USRIDX *USRPRF *USRQ *USRSPC *VLDL *WSCST </td><td>Optional <p>
</td></tr>
<tr>
<td><a class="el" href="page_chgusrspc.html#ss_chgusrspc_parms_sppoffset">SPPOFFSET</a> </td><td>Offset value of space pointer </td><td>0 to 16M - 1Page </td><td>Optional <p>
</td></tr>
</table>
<h3><a class="anchor" name="ss_chgusrspc_parms_usrspc">
USRSPC</a></h3>
Sepecifies the user space the content of which to be changed.<p>
<b>Qualifier 1: User space</b><p>
<b>name</b> Specify the name of the user space.<p>
<b>Qualifier 2: Library</b><br>
 Library in which the user space resides. Default to <b>*LIBL</b>.<h3><a class="anchor" name="ss_chgusrspc_parms_offset">
OFFSET</a></h3>
Offset in the space object's associated space. Unlike the <b>Start position</b> parameter of the QUSCHGUS API, this offset value is start from 0, and should not be larger than 16M - 1Page.<p>
<dl class="remark" compact><dt><b>Remarks:</b></dt><dd>When writing a pointer value into the target user space, the value specified for this paramter is automatically rounded to 16-byte boundary.</dd></dl>
<h3><a class="anchor" name="ss_chgusrspc_parms_datatype">
DTATYPE</a></h3>
Specifies the type of data to be written into the user space. Default to *SCALAR. Valiad values are:<p>
<ul>
<li><b>*SCALAR</b> Write scalar data into the target user space.</li><li><b>*PTR</b> Write pointer data into the target usre space.</li></ul>
<h3><a class="anchor" name="ss_chgusrspc_parms_dta">
DTA</a></h3>
Scalar data in character or hexadecimal format that will be written into the target user space.<h3><a class="anchor" name="ss_chgusrspc_parms_dtalen">
DTALEN</a></h3>
Length of the scalar data to be written into the target user space. Default to *CALC, in which case the length of the input scalar data will be calculated automatically.<h3><a class="anchor" name="ss_chgusrspc_parms_ptrtype">
PTRTYPE</a></h3>
Type of the pointer to be written into the target user space. Default to *SYP. Valid values are:<ul>
<li><b>*SYP</b> System pointer<br>
 When PTRTYPE(*SYP) is specified, CHGUSRSPC will try to write the system pointer to the object identified by parameter <a class="el" href="page_chgusrspc.html#ss_chgusrspc_parms_sysobj">SYSOBJ</a>.</li><li><b>*SPP</b> Space pointer<br>
 The pointer to be written into the target USRSPC is a space pointer.</li></ul>
<p>
<dl class="remark" compact><dt><b>Remarks:</b></dt><dd>CHGUSRSPC now supports two type of pointers to be written into a user space object, system pointer and space pointer, which are the most commonly used pointer types in IBM i applications.</dd></dl>
<h3><a class="anchor" name="ss_chgusrspc_parms_sysobj">
SYSOBJ</a></h3>
When DTATYPE(*PTR) is specified, the SYSOBJ parameter must be set to a valid objet name. If PTRTYPE(*SYP) is specified, a system pointer the the object specified by this paramter is to be written into the target user space. If PTRTYPE(*SPP) is specified, a space pointer addressing the associated space of the object specified by this parameter is to be written into the target user space. See <a class="el" href="page_chgusrspc.html#ss_chgusrspc_parms_sppoffset">SPPOFFSET</a> for more information.<h3><a class="anchor" name="ss_chgusrspc_parms_objtype">
OBJTYPE</a></h3>
Specifies the object type of <a class="el" href="page_chgusrspc.html#ss_chgusrspc_parms_sysobj">SYSOBJ</a>.<p>
<dl class="remark" compact><dt><b>Remarks:</b></dt><dd>Note that the <a class="el" href="page_chgusrspc.html#ss_chgusrspc_parms_objtype">OBJTYPE</a> parameter expects an external object type. CHGUSRSPC will convert the external object type to the corresponding MI object type before resolving the system pointer to the target MI object. For example, CHGUSRSPC SYSOBJ(<em>SOMELIB/SOMEFILE</em>) DTATYPE(*PTR) PTRTYPE(*SYP) OBJTYPE(*FILE) will write the system pointer to the space object 'SOMEFILE SOMELIB' (with MI object hex 1901) into the target USRSPC.</dd></dl>
<h3><a class="anchor" name="ss_chgusrspc_parms_sppoffset">
SPPOFFSET</a></h3>
When both DTATYPE(*PTR) and PTRTYPE(*SPP) are specified, this parameter indicates the offset value of a space pointer addressing the primary associated space <a class="el" href="page_chgusrspc.html#ss_chgusrspc_parms_sysobj">SYSOBJ</a>.<h2><a class="anchor" name="s_chgusrspc_eg">
Examples</a></h2>
<h3><a class="anchor" name="ss_chgusrspc_eg_scalar">
Writing Scalar Data into a User Space Object</a></h3>
<b>Creating a USRPSC via the QUSCRTUS API</b> The following call to the QUSCRTUS API creates a user space named LIB_A/SPC38. <div class="fragment"><pre class="fragment">CALL PGM(QUSRCRTUS)
     PARM('SPC38     LIB_A'  <span class="comment">/* Name and library of the USRSPC */</span>
          'U38'              <span class="comment">/* Attribute */</span>
          X'00100000'        <span class="comment">/* Initial length of the USRSPC: 1M */</span>
          X'00'              <span class="comment">/* Initial value of the USRSPC hex 00 */</span>
          '*CHANGE'          <span class="comment">/* Public authority */</span>
          '..')              <span class="comment">/* Text */</span>
</pre></div><p>
<b>Writing a Greeting at the start of SPC38</b><p>
<div align="center">
<img src="chgusrspc-scalar.png" alt="chgusrspc-scalar.png">
<p><strong>Writing a Greeting at the start of SPC38</strong></p></div>
<p>
<b>Check the content of SPC38</b><p>
To check the associate space of SPC38, you may dump the space object via CL command DMPOBJ or DMPSYSOBJ. For example, <div class="fragment"><pre class="fragment">DMPOBJ LIB_A/SPC38 *USRSPC
<span class="comment">/* or via the DMPSYSOBJ command */</span>
DMPSYSOBJ SPC38 LIB_A 19 34
</pre></div><p>
The result would like the following: <div class="fragment"><pre class="fragment">*...+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+....0....+....1....+....2
SPACE-                                                                                                                  
  000000   D5898385 40A39640 948585A3 40A896A4   405EB05D 00000000 00000000 00000000  *Nice to meet you ;^)            *
  000020   00000000 00000000 00000000 00000000   00000000 00000000 00000000 00000000  *                                *
</pre></div><h3><a class="anchor" name="ss_chgusrspc_eg_ptr">
Writing Pointers into a User Space Object</a></h3>
<b>Writing a system pointer into SPC38</b> Say that there is an OPM RPG program named SPR69 in library LIB_A. To store the system pointer to program SPR69 into SPC38 at offset 32, you can issue CHGUSRSPC command like the following.<p>
<div align="center">
<img src="chgusrspc-syp.png" alt="chgusrspc-syp.png">
<p><strong>Writing a SYP into SPC38</strong></p></div>
<p>
<b>Check the content of SPC38</b> Dump SPC38 again and the result might like the following: <div class="fragment"><pre class="fragment">*...+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+....0....+....1....+....2
SPACE-                                                                                                                  
  000000   D5898385 40A39640 948585A3 40A896A4   405EB05D 00000000 00000000 00000000  *Nice to meet you ;^)            *
  000020   00000000 00000000 197C212E 8E000200   00000000 00000000 00000000 00000000  *         @                      *
  000040   00000000 00000000 00000000 00000000   00000000 00000000 00000000 00000000  *                                *
        LINES  000060    TO    100DFF  SAME AS ABOVE                                                                    
.POINTERS-                                                                                                              
  000020   SYP 02 01 SPR69                           04 01 LIB_A                           0000  8000  *PGM             
</pre></div><p>
<b>Writing a space pointer into SPC38</b><p>
Say that you want to write a space pointer addressing the primary associated space of an ILE program object SPR68, with offset value 64, issue the CHGUSRSPC command like the following:<p>
<div align="center">
<img src="chgusrspc-spp.png" alt="chgusrspc-spp.png">
<p><strong>Writing a SPP into SPC38</strong></p></div>
<p>
<b>Check the content of SPC38</b> Dump SPC38 again and the result might like the following: <div class="fragment"><pre class="fragment">*...+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+....0....+....1....+....2
SPACE-                                                                                                                  
  000000   D5898385 40A39640 948585A3 40A896A4   405EB05D 00000000 00000000 00000000  *Nice to meet you ;^)            *
  000020   00000000 00000000 079DC2C6 5B000200   80000000 00000000 3E47713D 3C001040  *          BF                   *
  000040   00000000 00000000 00000000 00000000   00000000 00000000 00000000 00000000  *                                *
        LINES  000060    TO    100DFF  SAME AS ABOVE                                                                    
.POINTERS-                                                                                                              
  000020   SYP 02 01 SPR68                           04 01 LIB_A                           0000  8000  *PGM             
  000030   SPP 02 01 SPR68                           04 01 LIB_A                           00000040  0000               
</pre></div> </div>
<hr size="1">

<a href="http://sourceforge.net/donate/index.php?group_id=254578"><img src="http://images.sourceforge.net/images/project-support.jpg" width="88" height="32" border="0" alt="Support This Project" /> </a>

<address style="text-align: right;"><small>Generated on Tue May 10 19:55:09 2011 for i5/OS Programmer's Toolkit: Space Object Tools by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9  </small></address>
</body>
</html>
