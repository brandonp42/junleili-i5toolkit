<HTML>
  <HEAD>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <TITLE>i5/OS Programmer's Toolkit - MI/EMI Programmer's Guide</TITLE>
    <link href="tabs.css" rel="stylesheet" type="text/css">
    <link href="doxygen.css" rel="stylesheet" type="text/css">
    <link href="docs.css" rel="stylesheet" type="text/css">

    <table width="100%" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left">
          <a href="http://sourceforge.net/donate/index.php?group_id=254578"><img src="http://images.sourceforge.net/images/project-support.jpg" width="88" height="32" border="0" alt="Support This Project" /> </a>
        </td>
        <td align="right">
          <a href="http://sourceforge.net/projects/i5toolkit"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=254578&amp;type=13" width="120" height="30" alt="Get i5/OS Programmer's Toolkit at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a>
        </td>

      </tr>
    </table>

  </HEAD>
  <body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="page_ept">i5/OS Programmer's Toolkit: ILE RPG Header for the System Entry Point Table (SEPT) </a></h1>Go back to <a href="../index.html">main page</a> of project <a href="https://sourceforge.net/projects/i5toolkit/">i5/OS Programmer's Toolkit </a>.<p>
<a href="http://i5toolkit.svn.sourceforge.net/viewvc/i5toolkit/rpg/ept54.rpgleinc?view=markup">ept54.rpgleinc </a> declares index number for each entry in the System Entry Point Table (SEPT) of a V5R4M0 machine. The purpose of the ept54.rpgleinc to help ILE RPG programmers to improve their efficiency when invoking i5/OS APIs. Most APIs in form of program object have an particular entry in the SEPT (a system pointer to the program object). Calling such an API by name means one must first resolve a system pointer to it by name. Resolving a system pointer to an MI object residing in a crowded library such as QSYS is time-consuming comparing to using a resolved one. That's why the SEPT was designed. When an SEPT of a particurlar machine is initialized at the installation stage, system pointers to program objects in library QSYS in it remains unchanged even across IPLs. User programs or compiler generated programs take advantage of the SEPT to make faster API invocations.<p>
ILE C/C++ programmers can utilize the SEPT conviniently by including ILE C header file &lt;qliept.h&gt;. An ILE C/C++ programmer can utilize a resolved system pointer stored in the SEPT when invoking an i5/OS API like the following: <div class="fragment"><pre class="fragment"><span class="preprocessor"># include &lt;qliept.h&gt;</span>
<span class="comment">// ...</span>
  <span class="comment">// call the Clear Data Queue (QCLRDTAQ) API to clear a *DTAQ</span>
  QCLRDTAQ(<span class="stringliteral">"SOME_DTAQ "</span>, <span class="stringliteral">"SOME_LIB  "</span>);
</pre></div> or like the following <div class="fragment"><pre class="fragment"><span class="preprocessor"># include &lt;qliept.h&gt;</span>
<span class="comment">// ...</span>
  <span class="comment">// save the system pointer obtained from the SEPT</span>
  QCLRDTAQ_T *clrdtaq = QCLRDTAQ;

  <span class="comment">// call the Clear Data Queue (QCLRDTAQ) API to clear one *DTAQ</span>
  clrdtaq(<span class="stringliteral">"SOME_DTAQ "</span>, <span class="stringliteral">"SOME_LIB  "</span>);

  <span class="comment">// call QCLRDTAQ to clear another *DTAQ</span>
  clrdtaq(<span class="stringliteral">"ANOTHER_Q "</span>, <span class="stringliteral">"SOME_LIB  "</span>);
</pre></div><p>
The introduction of <a href="http://i5toolkit.svn.sourceforge.net/viewvc/i5toolkit/rpg/ept54.rpgleinc?view=markup">ept54.rpgleinc </a> enables ILE RPG programmers to utilize the SEPT to invoke an i5/OS API in combination with system built-in _CALLPGMV. For example, in the following test programs of ept54.rpgleinc, <a href="http://i5toolkit.svn.sourceforge.net/viewvc/i5toolkit/rpg/test/t065.rpgle?view=markup">t065.rpgle </a> one of the operational assistant APIs, QEZSNDMG is invoked via the resolved system pointer to it in the SEPT.<p>
<div class="fragment"><pre class="fragment">
     h dftactgrp(*no)

      /copy mih54
      /copy ept54

     d ept_ptr         s               *
     d septs           s               *   dim(7001)
     d                                     based(ept_ptr)
     d argv            s               *   dim(1)

      /free
           <span class="comment">// address the SEPT</span>
           ept_ptr = sysept();

      /if defined(*v5r4m0)
           <span class="comment">// call Operational Assistant API Send Message (QEZSNDMG)</span>
           callpgmv( septs(EPT_QEZSNDMG)
                   : argv
                   : 0);
      /endif

           *inlr = *on;
      /end-free
</pre></div><p>
<dl class="remark" compact><dt><b>Remarks:</b></dt><dd>To compile the above-mentioned ILE RPG program, remember to let the RPG compiler know where <a href="http://i5toolkit.svn.sourceforge.net/viewvc/i5toolkit/rpg/ept54.rpgleinc?view=markup">ept54.rpgleinc </a> and <a href="http://i5toolkit.svn.sourceforge.net/viewvc/i5toolkit/rpg/mih54.rpgleinc?view=markup">mih54.rpgleinc </a> can be found by setting proper value for parameter INCDIR.</dd></dl>
<h2><a class="anchor" name="s_ept_download_install">
Download and Install</a></h2>
You can download and install the ILE RPG Header for the SEPT from the a release package of the project. <a href="http://i5toolkit.svn.sourceforge.net/viewvc/i5toolkit/rpg/ept54.rpgleinc?view=markup">ept54.rpgleinc </a> can be restored to your system via bin/rpginc.savf in a release package beginning from release 0.2.13 of the project. All releases of i5/OS Programmer's Toolkit can be found at:<ul>
<li><a href="http://sourceforge.net/projects/i5toolkit/files/">http://sourceforge.net/projects/i5toolkit/files/</a></li></ul>
<p>
You can also download the lasted version of it by the following link and upload it to your system by FTP: <a href="http://i5toolkit.svn.sourceforge.net/viewvc/i5toolkit/rpg/ept54.rpgleinc">http://i5toolkit.svn.sourceforge.net/viewvc/i5toolkit/rpg/ept54.rpgleinc</a> . Or check it out from the svn repository like the following: <div class="fragment"><pre class="fragment">svn export https:<span class="comment">//i5toolkit.svn.sourceforge.net/svnroot/i5toolkit/rpg/ept54.rpgleinc</span>
</pre></div> </div>
<hr size="1">

<a href="http://sourceforge.net/donate/index.php?group_id=254578"><img src="http://images.sourceforge.net/images/project-support.jpg" width="88" height="32" border="0" alt="Support This Project" /> </a>

<address style="text-align: right;"><small>Generated on Tue May 10 19:55:09 2011 for i5/OS Programmer's Toolkit: System-builtin Headers for ILE RPG by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9  </small></address>
</body>
</html>
