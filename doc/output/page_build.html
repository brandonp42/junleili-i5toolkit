<HTML>
  <HEAD>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <TITLE>i5/OS Programmer's Toolkit - MI/EMI Programmer's Guide</TITLE>
    <link href="tabs.css" rel="stylesheet" type="text/css">
    <link href="doxygen.css" rel="stylesheet" type="text/css">
    <link href="docs.css" rel="stylesheet" type="text/css">

    <table width="100%" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left">
          <a href="http://sourceforge.net/donate/index.php?group_id=254578"><img src="http://images.sourceforge.net/images/project-support.jpg" width="88" height="32" border="0" alt="Support This Project" /> </a>
        </td>
        <td align="right">
          <a href="http://sourceforge.net/projects/i5toolkit"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=254578&amp;type=13" width="120" height="30" alt="Get i5/OS Programmer's Toolkit at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a>
        </td>

      </tr>
    </table>

  </HEAD>
  <body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="page_build">Build the Project from Source Code </a></h1>Some subprojects of the project are headers (copy books) to be included in your HLL programs, and needn't to be compiled; for example, <a href="rpg/index.html">System-builtin Headers and Examples for ILE HLLs</a>. While some other subprojects are utilities in forms of programs, CL commands, panel group objects, and so on; these subprojects need to be compile before be used. At each release of the project, compiled components of these subprojects in format of *SAVF are provided in the <em>bin</em> directory of the release package.<p>
To build the project from source code, you need to:<ul>
<li><a class="el" href="page_build.html#s_build_get_src">Get the source code of the project</a></li><li><a class="el" href="page_build.html#s_build_compile">Upload source files to your IBM i server and compile them via the PASE make utility</a></li><li><a class="el" href="page_build.html#s_build_trouble">Troubleshooting</a></li></ul>
<h2><a class="anchor" name="s_build_get_src">
Get the source code of the project</a></h2>
To get the source code of the project by either downing the latest release package or exporting from the project's svn repository.<ul>
<li>The source files of the project can be found in the <em>src</em> in a <a href="http://sourceforge.net/projects/i5toolkit/files/">release package</a>.</li><li>To export source code of the project, you may: <div class="fragment"><pre class="fragment">$ svn export https:<span class="comment">//i5toolkit.svn.sourceforge.net/svnroot/i5toolkit src</span>
</pre></div></li></ul>
<h2><a class="anchor" name="s_build_compile">
Upload source files to your IBM i server and compile them via the PASE make utility</a></h2>
By release 0.2.16, all subprojects of the project can be build via the PASE make utility (see the build script called makefile under each subporject's directory, e.g. <a href="https://i5toolkit.svn.sourceforge.net/svnroot/i5toolkit/cm/makefile">cm/makefile</a>).<p>
After getting the source of the project, you can build the project by the following steps<ul>
<li>Package the source code at your PC. Make sure the format of your source package can be recognized by archive tools available on your IBM i server. For example, if you want to use the jar utility to extract source files from your uploaded source package, you may package your source packege into .zip or .jar format. The following sample commands package the source package in .zip and .jar format respectively. <div class="fragment"><pre class="fragment">$ zip -r src.zip src
$ jar cfM src.jar src
</pre></div></li><li>Upload the source package to a directory in the IFS of your IBM i server via FTP. Make sure your source package is uploaded in BINARY mode.</li><li>Extract source files from the uploaded source package. Start a PASE shell session by calling QP2TERM, change the current directory to where the uploaded source packed resides, and then extract source files from the source package. For example, <div class="fragment"><pre class="fragment">$ jar xf src.zip
$ # or
$ jar xf src.jar
</pre></div></li><li>Build a subproject via the PASE make utility. Two MACROs are necessary when invoking the make command, BIN_LIB which incidates the library in which all compiled objects to be put, and MAKERULES which should be set to the path of the <em>rules.mk</em> file under the root of the source directory. For example, to build the <a href="spc/index.html">Space Object Tools</a>, you might: <div class="fragment"><pre class="fragment">cd src/spc
make -e BIN_LIB=i5toolkit -e MAKERULES=../rules.mk
</pre></div></li></ul>
<h2><a class="anchor" name="s_build_trouble">
Troubleshooting</a></h2>
<h3><a class="anchor" name="s_build_trouble_ccsid">
CCSID of Source Files</a></h3>
The CCSID of a source file created in the PASE environment is determined by the system values for national language QLANGID and QCNTRYID. For languages that use DBCS character sets (e.g. Simplified and Traditional Chinese and Japanese), the default CCSID of a stream file created in the PASE environment is 1208 (CCSID of UTF-8).<p>
We've noticed that <b>at release V5R2 of i5/OS</b>, some compilers and utilities do NOT work very well with stream source files of CCSID 1208. For example, the ILE C compiler (e.g. CRTBNDC) cannot open stream source unit of CCSID 1208; the CPYFRMSTMF command will also fail to copy a stream file of CCSID 1208 to a source PF member. To avoid this problem on a V5R2 machine, you can change the CCSID of your stream files to 819 by the setccsid command. For example, the following command changes CCSID of the source files in directory <em>src</em> to 819 recursively. <div class="fragment"><pre class="fragment">$ setccsid -R 819 src
</pre></div> </div>
<hr size="1">

<a href="http://sourceforge.net/donate/index.php?group_id=254578"><img src="http://images.sourceforge.net/images/project-support.jpg" width="88" height="32" border="0" alt="Support This Project" /> </a>

<address style="text-align: right;"><small>Generated on Tue May 10 19:55:04 2011 for i5/OS Programmer's Toolkit by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9  </small></address>
</body>
</html>
