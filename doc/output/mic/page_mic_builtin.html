<HTML>
  <HEAD>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <TITLE>i5/OS Programmer's Toolkit - MI/EMI Programmer's Guide</TITLE>
    <link href="tabs.css" rel="stylesheet" type="text/css">
    <link href="doxygen.css" rel="stylesheet" type="text/css">
    <link href="docs.css" rel="stylesheet" type="text/css">

    <table width="100%" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left">
          <a href="http://sourceforge.net/donate/index.php?group_id=254578"><img src="http://images.sourceforge.net/images/project-support.jpg" width="88" height="32" border="0" alt="Support This Project" /> </a>
        </td>
        <td align="right">
          <a href="http://sourceforge.net/projects/i5toolkit"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=254578&amp;type=13" width="120" height="30" alt="Get i5/OS Programmer's Toolkit at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a>
        </td>

      </tr>
    </table>

  </HEAD>
  <body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="page_mic_builtin">Specifications of EMI Builtins </a></h1>Here we describe all EMI builtin implemented by now.<p>
Terminology used here confirms to IBM's convension, see the following documentation for details:<ul>
<li><a href="http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/rzatk/MININ.htm#Header_3">Machine Interface Architecture Introduction - Instruction Format Conventions Used </a></li><li><a href="http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/rzatk/MININ.htm#HDRNBPOPER">Machine Interface Architecture Introduction - Definition Of The NBP Operand Syntax </a></li></ul>
<p>
Builtin list<ul>
<li><a class="el" href="page_mic_builtin.html#sect_mic_builtin_memcpy">memcpy (copy memory area)</a></li><li><a class="el" href="page_mic_builtin.html#sect_mic_builtin_sendmsg">sendmsg (send a program message)</a></li><li><a class="el" href="page_mic_builtin.html#sect_mic_builtin_stmf_creat">stmf-creat (open and possibly create a stream file)</a></li><li><a class="el" href="page_mic_builtin.html#sect_mic_builtin_stmf_close">stmf-close (close a file descriptor)</a></li><li><a class="el" href="page_mic_builtin.html#sect_mic_builtin_stmf_write">stmf-write (write to a file descriptor)</a></li><li><a class="el" href="page_mic_builtin.html#sect_mic_builtin_system">system (execute a CL command)</a></li><li><a class="el" href="page_mic_builtin.html#sect_mic_builtin_uim_opnda">uim-opnda (initiate a UIM display application)</a></li><li><a class="el" href="page_mic_builtin.html#sect_mic_builtin_uim_cloa">uim-cloa (close a UIM application)</a></li><li><a class="el" href="page_mic_builtin.html#sect_mic_builtin_uim_dspp">uim-dspp (display a UIM panel)</a></li><li><a class="el" href="page_mic_builtin.html#sect_mic_builtin_uim_putv">uim-putv (update UIM variables)</a></li><li><a class="el" href="page_mic_builtin.html#sect_mic_builtin_uim_getv">uim-getv (obtain UIM variables)</a></li><li><a class="el" href="page_mic_builtin.html#sect_mic_builtin_memset">memset (propogate byte)</a></li></ul>
<h2><a class="anchor" name="sect_mic_builtin_memcpy">
%memcpy (copy memory area)</a></h2>
Prototye of %memcpy <div class="fragment"><pre class="fragment"><span class="comment">/* builtin number: hex 0000 */</span>
%memcpy(
        target_ptr, : space pointer, points to target data <span class="keywordtype">object</span>
        source_ptr, : space pointer, points to source data <span class="keywordtype">object</span>
        len         : numeric scalar, specifies the number of bytes to copy from
                      source data <span class="keywordtype">object</span> to target data <span class="keywordtype">object</span>
)
</pre></div><p>
Builtin %memcpy copies <em>len</em> bytes from the data object that <em>source_ptr</em> addressed to to the data object that <em>target_ptr</em> addressed to. The source and target data objects may not overlap.<h2><a class="anchor" name="sect_mic_builtin_sendmsg">
%sendmsg (send a program message)</a></h2>
Builtin %sendmsg sends a program message containing message text stored in <em>msg</em> to a program's caller.<p>
Prototye of %sendmsg <div class="fragment"><pre class="fragment"><span class="comment">/* builtin number: hex 0001 */</span>
%sendmsg(
        msg,     : character scalar, message to send
        msg_len  : length of message in bytes to send
)
</pre></div><h2><a class="anchor" name="sect_mic_builtin_stmf_creat">
%stmf-creat (open and possibly create a stream file)</a></h2>
Prototype <div class="fragment"><pre class="fragment"><span class="comment">/* builtin number: hex 0002 */</span>
%stmf-creat(
        path_name, : character scalar, *STMF path name
        acess_mode : bin(4), access mode of the newly created *STMF
) : bin(4), returned file descriptor
</pre></div><p>
%stmf-creat creates a new IFS stream file or truncate an existing IFS stream file. %stmf-creat returns a new file descriptor or -1 if an error occured.<p>
See <a class="el" href="page_mi_eg.html#sect_mi_eg_05">Operate Stream Files using EMI Stream File Bulitins</a> for example.<h2><a class="anchor" name="sect_mic_builtin_stmf_close">
%stmf-close (close a file descriptor)</a></h2>
Prototype <div class="fragment"><pre class="fragment"><span class="comment">/* builtin number: hex 0003 */</span>
%stmf-close(
        file_descriptor : bin(4), file descriptor to close
)
</pre></div><p>
%stmf-close closes a file descriptor. Since this builtin calls the unix-type API close(), feel free to use it to close file descriptors created by socket() or pipe(). :p<p>
See <a class="el" href="page_mi_eg.html#sect_mi_eg_05">Operate Stream Files using EMI Stream File Bulitins</a> for example.<h2><a class="anchor" name="sect_mic_builtin_stmf_write">
%stmf-write (write to a file descriptor)</a></h2>
Prototype <div class="fragment"><pre class="fragment"><span class="comment">/* builtin number: hex 0003 */</span>
%stmf-write(
        file_descriptor, : bin(4), file descriptor to close
        buf,             : character scalar,
        len              : bin(4)
) : bin(4), bytes written to the stream file
</pre></div><p>
%stmf-write writes up to <em>len</em> bytes to <em>file_descriptor</em> from the beginning of <em>buf</em>.<p>
See <a class="el" href="page_mi_eg.html#sect_mi_eg_05">Operate Stream Files using EMI Stream File Bulitins</a> for example.<h2><a class="anchor" name="sect_mic_builtin_system">
%system (execute a CL command)</a></h2>
<div class="fragment"><pre class="fragment"><span class="comment">/* builtin number: hex 0005 */</span>
%system(
        cl_command : null-terminated character scalar, CL command to execute
) : bin(4), return value
</pre></div><p>
%system executes a CL command specified in parameter <em>cl_command</em> and returns an integer walue to indicates whether or not the CL command has been executed successfully. %system returns nonzero if the specified CL command failed, and zero if not.<h2><a class="anchor" name="sect_mic_builtin_uim_opnda">
%uim-opnda (initiate a UIM display application)</a></h2>
<div class="fragment"><pre class="fragment"><span class="comment">/* builtin number: hex 0006 */</span>
%uim-opnda(
        pnlgrp_name, : <span class="keywordtype">char</span>(20), qualified panel group name
        app_scope,   : bin(4), application scope
        parm_interface, : bin(4), exit parameter interface
        full_screen_help, : <span class="keywordtype">char</span>(1), display help information in full-screen or pop-up windows
        err_code     : character scalar, error code
) : char(8), unique application handle for the opened application.
</pre></div><p>
%uim-opnda initiates a UIM display application. %uim-opnda encapsulates the functionalitiy of UIM (User Interface Manager) API QUIOPNDA. For UIM APIs, and API QUIOPNDA. Please refer to the following links:<ul>
<li><a href="http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/apis/uim1.htm">User Interface Manager (UIM) APIs </a></li><li><a href="http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/apis/quiopnda.htm">Open Display Application (QUIOPNDA) API </a></li></ul>
<p>
%uim-opnda accepts parameters <em>pnlgrp_name</em>, <em>app_scope</em>, <em>parm_interface</em>, <em>full_screen_help</em>, <em>err_code</em> and returns a 8 bytes unique application handle for the opened application.<p>
<dl class="remark" compact><dt><b>Remarks:</b></dt><dd>Parameter <em>app_scope</em> specifies the manner that UIM resources occupied by the opened application are mananged. See <a href="http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/apis/quiopnda.htm">Open Display Application (QUIOPNDA) API </a> for details.<p>
Parameter <em>err_code</em> refers to the <a href="http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/apiref/error.htm#hdrerrcod">Error Code Parameter </a> used by i5/OS APIs.</dd></dl>
<h2><a class="anchor" name="sect_mic_builtin_uim_cloa">
%uim-cloa (close a UIM application)</a></h2>
<div class="fragment"><pre class="fragment"><span class="comment">/* builtin number: hex 0007 */</span>
%uim-cloa (
          apph,    : <span class="keywordtype">char</span>(8), application handle
          option,  : <span class="keywordtype">char</span>(1), close option
          err_code : character scalar, error code
)
</pre></div><p>
%uim-cloa closes a UIM application that was opened using the Open Display Application (QUIOPNDA) API or the Open Print Application (QUIOPNPA) API.<h2><a class="anchor" name="sect_mic_builtin_uim_dspp">
%uim-dspp (display a UIM panel)</a></h2>
<div class="fragment"><pre class="fragment"><span class="comment">/* builtin number: hex 0008 */</span>
%uim-dspp (
          apph,       : <span class="keywordtype">char</span>(8), application handle
          panel,      : <span class="keywordtype">char</span>(10), panel name to display
          redisp_opt, : <span class="keywordtype">char</span>(1), redisplay option
          err_code    : character scalar, error code
) : bin(4), 
</pre></div><p>
%uim-dspp displays a panel and waits for the user to press either a function key or the Enter key.<p>
%uim-dspp encapsulates the functionalitiy of UIM (User Interface Manager) API QUIDSPP. For UIM APIs, and API QUIDSPP. Please refer to the following links:<ul>
<li><a href="http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/apis/uim1.htm">User Interface Manager (UIM) APIs </a></li><li><a href="http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/apis/quidspp.htm">Open Display Application (QUIDSPP) API </a></li></ul>
<h2><a class="anchor" name="sect_mic_builtin_uim_putv">
%uim-putv (update UIM variables)</a></h2>
<div class="fragment"><pre class="fragment"><span class="comment">/* builtin number: hex 0009 */</span>
%uim-putv (
          apph,        : <span class="keywordtype">char</span>(8), application handle
          var_buffer,  : character scalar, variable buffer
          var_buf_len, : bin(4), variable buffer length
          var_rcd,     : <span class="keywordtype">char</span>(10), variable record name
          err_code    : character scalar, error code
)
</pre></div><p>
%uim-putv updates the value of one or more dialog variables by specifying variable buffer of the application program and naming the variable record defined in the panel group for the open application.<p>
%uim-putv encapsulates the functionalitiy of UIM (User Interface Manager) API QUIPUTV. For UIM APIs, and API QUIPUTV. Please refer to the following links:<ul>
<li><a href="http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/apis/uim1.htm">User Interface Manager (UIM) APIs </a></li><li><a href="http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/apis/quiputv.htm">Open Display Application (QUIPUTV) API </a></li></ul>
<h2><a class="anchor" name="sect_mic_builtin_uim_getv">
%uim-getv (obtain UIM variables)</a></h2>
<div class="fragment"><pre class="fragment"><span class="comment">/* builtin number: hex 000A */</span>
%uim-getv (
          apph,        : <span class="keywordtype">char</span>(8), application handle
          var_buffer,  : character scalar, variable buffer
          var_buf_len, : bin(4), variable buffer length
          var_rcd,     : <span class="keywordtype">char</span>(10), variable record name
          err_code    : character scalar, error code
)
</pre></div><p>
%uim-getv obtains the value of one or more dialog variables by specifying variable buffer of the application program and naming the variable record defined in the panel group for the open application.<p>
%uim-getv encapsulates the functionalitiy of UIM (User Interface Manager) API QUIGETV. For UIM APIs, and API QUIGETV. Please refer to the following links:<ul>
<li><a href="http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/apis/uim1.htm">User Interface Manager (UIM) APIs </a></li><li><a href="http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/apis/quigetv.htm">Open Display Application (QUIGETV) API </a></li></ul>
<h2><a class="anchor" name="sect_mic_builtin_memset">
%memset (propogate byte)</a></h2>
Prototype of %memset <div class="fragment"><pre class="fragment"><span class="comment">/* builtin number: hex 000B */</span>
%memset(
        target_ptr,  : space pointer, points to target data <span class="keywordtype">object</span>
        source_byte, : character scalar, only the leftmost byte is used
        len          : numeric scalar, specifies the number of bytes to copy
                       into the target data <span class="keywordtype">object</span>
)
</pre></div><p>
Builtin %memset copies the byte value specified by <em>source_byte</em> into the storage specified by target string. <em>len</em> specifies the number of bytes of storage into which this value is stored. </div>
<hr size="1">

<a href="http://sourceforge.net/donate/index.php?group_id=254578"><img src="http://images.sourceforge.net/images/project-support.jpg" width="88" height="32" border="0" alt="Support This Project" /> </a>

<address style="text-align: right;"><small>Generated on Tue May 10 19:55:05 2011 for i5/OS Programmer's Toolkit: MIC - The Machine Instruction Language Compiler by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9  </small></address>
</body>
</html>
