<HTML>
  <HEAD>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <TITLE>i5/OS Programmer's Toolkit - MI/EMI Programmer's Guide</TITLE>
    <link href="tabs.css" rel="stylesheet" type="text/css">
    <link href="doxygen.css" rel="stylesheet" type="text/css">
    <link href="docs.css" rel="stylesheet" type="text/css">

    <table width="100%" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left">
          <a href="http://sourceforge.net/donate/index.php?group_id=254578"><img src="http://images.sourceforge.net/images/project-support.jpg" width="88" height="32" border="0" alt="Support This Project" /> </a>
        </td>
        <td align="right">
          <a href="http://sourceforge.net/projects/i5toolkit"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=254578&amp;type=13" width="120" height="30" alt="Get i5/OS Programmer's Toolkit at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a>
        </td>

      </tr>
    </table>

  </HEAD>
  <body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="page_mi_eg_uim">Interact with Users Using EMI's UIM Builtins </a></h1>When we need to interact with users from 5250 terminals, there are three ways we can choice:<ul>
<li>using a *DSPF (Display File) and driving it by RPG programs through record I/O</li><li>using a *PNLGRP (Panel Group) and driving it by UIM (User Interface Mananger) APIs</li><li>using Dynamic Screen APIs</li></ul>
<p>
IBM introduced UIM as the following <div class="fragment"><pre class="fragment">Using the user interface manager (UIM) can improve user and
application programmer productivity.

The UIM controls the panel’s appearance and assures consistency with
panels developed by IBM. This gives an application a consistent user
interface which increases user productivity.

Application programmer productivity is increased by using the UIM to
create panels. The application programmer can describe the contents of
a panel without specifying all the details. The format of the panel’s
elements is handled automatically by the UIM.  Using the UIM language
tags allows the application programmer to ′′link′′ an option number or
function key to a specific command or program. Then, when a user
selects an option or presses a function key, the UIM automatically
handles running the command or program. The UIM also handles scrolling
through a multiple-page panel. The Major Command Groups menu is an
example of a multiple-page panel.
</pre></div><p>
<dl class="remark" compact><dt><b>Remarks:</b></dt><dd>See Chapter 15. Improving Productivity with User Interface Manager of <a href="http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/books/sc415715.pdf">Application display programming </a></dd></dl>
EMI provides programming supports for UIM with a set of UIM builtins. Here're examples of using EMI's UIM builtins.<ul>
<li><a class="el" href="page_mi_eg_uim.html#sect_mi_eg_uim_hello">A Hello World Example of Using EMI's UIM Builtins</a></li><li><a class="el" href="page_mi_eg_uim.html#sect_mi_eg_uim_dspidxd">Another Simple UIM Example</a></li></ul>
<h2><a class="anchor" name="sect_mi_eg_uim_hello">
A Hello World Example of Using EMI's UIM Builtins</a></h2>
Here we have a simple panel group <a href="src/uu.pnlgrp">uu.pnlgrp</a> and a EMI program which drives the panel group uu.emi.<p>
<ul>
<li><a class="el" href="page_mi_eg_uim.html#ss_mi_eg_uim_hello_src">Sources</a></li><li><a class="el" href="page_mi_eg_uim.html#ss_mi_eg_uim_hello_cpl">Compilation *PNLGRP UU and Program UU</a></li><li><a class="el" href="page_mi_eg_uim.html#ss_mi_eg_uim_hello_run">Run Program UU</a></li></ul>
<h3><a class="anchor" name="ss_mi_eg_uim_hello_src">
Sources</a></h3>
<div class="fragment"><pre class="fragment">.*
.* @file uu.pnlgrp
.*
.* panel group UU
.*

:pnlgrp.

:<span class="keyword">class </span>name=a20
       basetype=<span class="stringliteral">'char 20'</span>
       .
:eclass.
:<span class="keyword">class </span>name=u10
       basetype=<span class="stringliteral">'graphic 10 13488'</span>
       width=20
       .
:eclass.

:var name=title
     <span class="keyword">class</span>=a20
     .

:var name=word
     <span class="keyword">class</span>=u10
     .

:varrcd name=rt
        vars=<span class="stringliteral">'title'</span>
        .

:varrcd name=rw
        vars=<span class="stringliteral">'word'</span>
        .

:keyl name=klmain.
:keyi key=f12
      help=<span class="stringliteral">'hlp'</span>
      action=<span class="stringliteral">'exit noset'</span>
      .F12=byebye
:keyi key=enter
      help=<span class="stringliteral">'hlp'</span>
      action=enter
      .
:ekeyl.

:panel name=pp
       title=title
       keyl=klmain
       help=<span class="stringliteral">'hlp'</span>
       enter=<span class="stringliteral">'return 100'</span>
       .
:data depth=2
      layout=1
      .

:datacol width=20.
:datacol width=<span class="charliteral">'*'</span>.

:datai var=word
       help=<span class="stringliteral">'hlp'</span>
       usage=out
       .yuyu

:edata.
:epanel.

:help name=<span class="stringliteral">'hlp'</span>.
What can I help?
:ehelp.

:epnlgrp.
.* eof uu.pnlgrp
</pre></div> <div class="fragment"><pre class="fragment"><span class="comment">/* *</span>
<span class="comment"> * @file uu.emi</span>
<span class="comment"> *</span>
<span class="comment"> * Display panel-group LSBIN/UU</span>
<span class="comment"> */</span>

entry i-main ext                ;

dcl dd apph char(8) auto        ;
dcl dd pnlgrp <span class="keywordtype">char</span>(20) auto
        init("UU        LSBIN") ;

        <span class="comment">/* init emi-qusec */</span>
        cpynv emi-ec-bytes-in, emi-qusec-len ;

        <span class="comment">/* open UIM display application */</span>
        cpybla apph, %uim-opnda(
          pnlgrp,       <span class="comment">/* panel-group name */</span>
          -1,           <span class="comment">/* application scope: program level  */</span>
          0,            <span class="comment">/* exit program interface */</span>
          'N',          <span class="comment">/* do NOT show full screen help info */</span>
          emi-qusec     <span class="comment">/* error code */</span>
        );

        <span class="comment">/* set panel title */</span>
        %uim-putv(
          apph,         <span class="comment">/* application handle returned by %uim-opnda */</span>
          title,        <span class="comment">/* program variable */</span>
          20,           <span class="comment">/* length of program variable */</span>
          "RT",         <span class="comment">/* variable record name */</span>
          emi-qusec     <span class="comment">/* error code */</span>
        );
dcl dd word <span class="keywordtype">char</span>(20) auto                          ;
        <span class="comment">/* set panel UIM variable WORD */</span>
        cpybrep word, x'00'       ;
        cpybla  word, x'4F60597D' ; <span class="comment">/* UCS-2 chinese string: '你好' */</span>
        %uim-putv(apph, word, 20, "RW", emi-qusec);

        <span class="comment">/* display panel IDXATTR */</span>
        %uim-dspp(
          apph,         <span class="comment">/* application handle */</span>
          "PP",         <span class="comment">/* panel name */</span>
          'Y',          <span class="comment">/* redisplay option */</span>
          emi-qusec     <span class="comment">/* error code */</span>
        );

        <span class="comment">/* close UIM application */</span>
        %uim-cloa(apph, 'M', emi-qusec);

brk "RTN"                       ;
        rtx *                   ;

/include qusec.emi              ;

pend                            ;
<span class="comment">/* eof - uu.emi */</span>
</pre></div><h3><a class="anchor" name="ss_mi_eg_uim_hello_cpl">
Compilation *PNLGRP UU and Program UU</a></h3>
<ul>
<li>CL command used to compile *PNLGRP UU might like the following <div class="fragment"><pre class="fragment">   CRTPNLGRP PNLGRP(LSBIN) SRCMBR(LS2008/JULY) MBR(UU) REPLACE(*YES)
</pre></div></li></ul>
<p>
<ul>
<li>CL command used to compile program UU might like the following <div class="fragment"><pre class="fragment">   &gt; CHDIR DIR(<span class="stringliteral">'my-working-directory'</span>)
     Current directory changed.
   &gt; MIC PGM(LSBIN/UU)
         SRCPATH('uu.emi')
         OPTION(*REPLACE)
</pre></div></li></ul>
<h3><a class="anchor" name="ss_mi_eg_uim_hello_run">
Run Program UU</a></h3>
When we run *PGM UU, we should see the following. <div align="center">
<img src="mi-eg-uim-1.png" alt="mi-eg-uim-1.png">
</div>
<h2><a class="anchor" name="sect_mi_eg_uim_dspidxd">
Another Simple UIM Example</a></h2>
CL command DSPIDXD is a member of i5/OS Programmer's Toolkit. The DSPIDXD command displays attributes of a user index (*USRIDX) object whose MI object type and subtype is hex 0E0A. See <a href="../idx/page_dspidxd.html">CL Command DSPIDXD (Display User Index Description)</a> for details.<p>
Sources of the DSPIDXD command is another simple example of EMI's UIM builtins.<ul>
<li><a href="http://i5toolkit.svn.sourceforge.net/viewvc/i5toolkit/idx/dspidxd.pnlgrp?revision=37&view=markup">dspidxd.pnlgrp </a></li><li><a href="http://i5toolkit.svn.sourceforge.net/viewvc/i5toolkit/idx/dspidxattr.pnl?view=markup">dspidxattr.pnl </a> <dl class="remark" compact><dt><b>Remarks:</b></dt><dd>Note that dspidxattr.pnl is included by dspidxd.pnlgrp.</dd></dl>
</li><li><a href="http://i5toolkit.svn.sourceforge.net/viewvc/i5toolkit/idx/dspidxd.emi?revision=40&view=markup">dspidxd.emi </a> </li></ul>
</div>
<hr size="1">

<a href="http://sourceforge.net/donate/index.php?group_id=254578"><img src="http://images.sourceforge.net/images/project-support.jpg" width="88" height="32" border="0" alt="Support This Project" /> </a>

<address style="text-align: right;"><small>Generated on Tue May 10 19:55:05 2011 for i5/OS Programmer's Toolkit: MIC - The Machine Instruction Language Compiler by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9  </small></address>
</body>
</html>
